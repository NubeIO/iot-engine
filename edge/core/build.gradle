
ext {
    h2_version = '1.4.197'
}

//buildscript {
//    sourceSets {
//        java {
//            srcDir file('src/buildscript/java/')
//            include '**/edge/model/buildscript/*.java'
//            include '**/edge/model/converter/*.java'
//            include '**/edge/loader/*.java'
//        }
//    }
//    dependencies {
//        classpath project(':core')
//        classpath "org.jooq:jooq-codegen:$project.jooq_version"
//        classpath "org.jooq:jooq-meta:$project.jooq_version"
//        classpath "io.github.jklingsporn:vertx-jooq-generate:$project.vertx_jooq_version"
//        classpath "org.xerial:sqlite-jdbc:$project.sqlite_version"
//    }
//}

dependencies {
    compile project(':core:base')
    compile project(':core:sql')
    compile project(':eventbus:edge')
    compile "com.h2database:h2:$project.h2_version"
    compile "io.vertx:vertx-maven-service-factory:$project.vertxVersion"
}


//import groovy.xml.MarkupBuilder
//import org.jooq.util.GenerationTool
//
//import javax.xml.bind.JAXB
//
//task jooqGenerate {
//    doLast() {
//        def writer = new StringWriter()
//        new MarkupBuilder(writer)
//                .configuration("xmlns": "http://www.jooq.org/xsd/jooq-codegen-$project.jooq_version"+".xsd") {
//            jdbc {
//                driver('org.sqlite.JDBC')
//                url("jdbc:sqlite:${project.basedir}/app-installer.db")
//            }
//            generator {
//                name('com.nubeiot.edge.model.buildscript.CustomVertxGenerator')
//                database {
//                    name('org.jooq.util.sqlite.SQLiteDatabase')
//                    include('.*')
//                    unsignedTypes(false)
//                    includeTables(true)
//                    includeRoutines(true)
//                    includePackages(false)
//                    includeUDTs(true)
//                    includeSequences(true)
//                }
//                generate([:]) {
//                    deprecated(false)
//                    records(false)
//                    interfaces(true)
//                    fluentSetters(true)
//                    jpaAnnotations(true)
//                    pojos(true)
//                    daos(true)
//                }
//                target() {
//                    packageName('com.nubeiot.edge.model.gen')
//                    directory("$projectDir/src/main/java")
//                }
//                strategy {
//                    name('io.github.jklingsporn.vertx.jooq.generate.rx.JDBCRXVertxGeneratorStrategy')
//                }
//            }
//        }
//        GenerationTool.generate(
//                JAXB.unmarshal(new StringReader(writer.toString()), org.jooq.meta.jaxb.Configuration.class)
//        )
//    }
//}